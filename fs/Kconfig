# SPDX-License-Identifier: GPL-2.0-only

menu "fs"

config VFS
    bool "Virtual File System (VFS) support"
    default y
    help
      Enable support for the Virtual File System layer.

config VFS_PURE_KERNEL
    bool "VFS Pure Kernel Mode (Disable all auto-mounts)"
    depends on VFS
    default n
    help
      If enabled, the kernel will not perform any automatic mounts of
      pseudo-filesystems (devtmpfs, procfs, sysfs, resfs).
      This ensures the kernel makes zero assumptions about the
      userspace filesystem layout. Policy becomes the absolute
      responsibility of the init process.

config VFS_UBC
    bool "Unified Buffer Cache (UBC)"
    depends on VFS
    default y
    help
      Enable the Unified Buffer Cache. This ensures that the VFS and
      Memory Management layers share the same physical pages for file
      data. All buffered I/O goes through the Page Cache.

config VFS_RESCONTROL
    bool "Resource Domain Control (ResDomain) VFS integration"
    depends on VFS && RESDOMAINS
    default y
    help
      Integrate Hierarchical Resource Domains (ResDomain) with the VFS.
      This allows associating filesystems or mount points with specific
      resource limits and accounting.

config VFS_DEBUG_EVENTS
    bool "VFS Event Debugging"
    depends on VFS
    default n
    help
      Enable verbose logging of VFS events (create, delete, modify).

config VFS_RENAME_OVERWRITE
    bool "VFS rename overwrites destination"
    depends on VFS
    default y
    help
      If enabled, the rename() system call will overwrite the destination
      if it exists and is of the same type (file or directory). This is
      the default POSIX and Linux behavior.

config AEROQ_HFS
    bool "AeroQ Hierarchical File System (HFS) layout"
    depends on VFS
    default y
    help
      Enable the AeroQ HFS layout. This sets the default mount paths
      for pseudo-filesystems like devtmpfs, procfs, and sysfs to comply
      with the AeroQ OS specification.

      Paths:
        - devtmpfs: /runtime/devices
        - procfs: /runtime/processes
        - sysfs: /runtime/sys
        - resfs: /runtime/res

config VFS_DCACHE_SIZE
    int "Dentry Cache Size"
    depends on VFS
    default 4096
    help
      The maximum number of directory entries to cache in memory.
      Higher values speed up path lookup but consume more slab memory.

config DEVTMPFS
    bool "Device Temporary Filesystem (devtmpfs) support"
    depends on VFS
    default y
    help
      Enable support for devtmpfs, a kernel-managed pseudo-filesystem
      for device nodes.

config DEVTMPFS_MOUNT
    bool "Mount devtmpfs automatically during boot"
    depends on DEVTMPFS && !VFS_PURE_KERNEL
    default y
    help
      Automatically mount devtmpfs during kernel initialization.

config DEVTMPFS_MOUNT_PATH
    string "Default mount path for devtmpfs"
    depends on DEVTMPFS_MOUNT
    default "/runtime/devices" if AEROQ_HFS
    default "/dev"
    help
      The path where devtmpfs should be mounted automatically.

config PROCFS
    bool "Process Information Filesystem (procfs) support"
    depends on VFS
    default y
    help
      Enable support for procfs, a pseudo-filesystem for process
      information and system statistics.

config PROCFS_MOUNT
    bool "Mount procfs automatically during boot"
    depends on PROCFS && !VFS_PURE_KERNEL
    default y
    help
      Automatically mount procfs during kernel initialization.

config PROCFS_MOUNT_PATH
    string "Default mount path for procfs"
    depends on PROCFS_MOUNT
    default "/runtime/processes" if AEROQ_HFS
    default "/proc"
    help
      The path where procfs should be mounted automatically.

config SYSFS
    bool "System Filesystem (sysfs) support"
    depends on VFS
    default y
    help
      Enable support for sysfs, a pseudo-filesystem for kernel objects.

config SYSFS_MOUNT
    bool "Mount sysfs automatically during boot"
    depends on SYSFS && !VFS_PURE_KERNEL
    default y
    help
      Automatically mount sysfs during kernel initialization.

config SYSFS_MOUNT_PATH
    string "Default mount path for sysfs"
    depends on SYSFS_MOUNT
    default "/runtime/sys" if AEROQ_HFS
    default "/sys"
    help
      The path where sysfs should be mounted automatically.

config RESFS
    bool "Resource Domain Filesystem (resfs) support"
    depends on VFS && RESDOMAINS
    default y
    help
      Enable support for resfs, a pseudo-filesystem for managing
      hierarchical resource domains.

config RESFS_MOUNT
    bool "Mount resfs automatically during boot"
    depends on RESFS && !VFS_PURE_KERNEL
    default y
    help
      Automatically mount resfs during kernel initialization.

config RESFS_MOUNT_PATH
    string "Default mount path for resfs"
    depends on RESFS_MOUNT
    default "/runtime/res" if AEROQ_HFS
    default "/res"
    help
      The path where resfs should be mounted automatically.

config USTARFS
    bool "USTAR (tar) filesystem support"
    depends on VFS
    default y
    help
      Enable support for the USTAR filesystem.

config INITRAMFS
    bool "Initramfs (CPIO) support"
    depends on VFS
    default y
    help
      Enable support for unpacking a CPIO archive into the rootfs.

config INITRD_NAME_MAX_SIZE
    int "Maximum name size for initramfs image"
    depends on INITRAMFS
    default 128
    help
      Maximum length for initramfs name passed in initrd= in cmdline

endmenu
